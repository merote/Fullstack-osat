(this.webpackJsonpworking_space_2=this.webpackJsonpworking_space_2||[]).push([[0],{15:function(e,t,n){e.exports=n(38)},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(13),u=n.n(r),o=n(14),l=n(2),i=function(e){return c.a.createElement("div",null,"filter shown with: ",c.a.createElement("input",{onChange:e.onChange,value:e.newFilter}))},m=function(e){return c.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.addContact()}},c.a.createElement("div",null,"name: ",c.a.createElement("input",{value:e.name,onChange:e.changeName})),c.a.createElement("div",null,"number: ",c.a.createElement("input",{value:e.number,onChange:e.changeNumber})),c.a.createElement("button",{type:"submit"},"add"))},f=function(e){return c.a.createElement("table",null,c.a.createElement("tbody",null,e.persons.filter((function(t){return t.name.toLowerCase().includes(e.newFilter.toLowerCase())})).map((function(t,n){return c.a.createElement("tr",{key:n},c.a.createElement("td",null,t.name),c.a.createElement("td",null,t.number),c.a.createElement("td",null,c.a.createElement("button",{type:"button",onClick:function(){return window.confirm("delete ".concat(t.name))?e.removeContact(t.id,t.name):null}},"delete")))}))))},s=n(3),d=n.n(s),E="/api/persons",b=function(){return d.a.get(E)},h=function(e){return d.a.post(E,e)},p=function(e){var t="".concat(E,"/").concat(e);return console.log(t),d.a.delete(t)},v=function(e,t){return d.a.put("".concat(E,"/").concat(e),t)},g=(n(37),function(e){var t=e.message;return null===t.text?null:(console.log(t),c.a.createElement("div",{className:t.failure?"alertFailure":"alert"},t.text))}),w=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1],u=Object(a.useState)(""),s=Object(l.a)(u,2),d=s[0],E=s[1],w=Object(a.useState)(""),O=Object(l.a)(w,2),C=O[0],R=O[1],j=Object(a.useState)(""),k=Object(l.a)(j,2),A=k[0],D=k[1],x=Object(a.useState)({text:null,failure:!1}),_=Object(l.a)(x,2),y=_[0],N=_[1];Object(a.useEffect)((function(){b().then((function(e){r(e.data)}))}),[]);var S=function(e,t,n){var a=["Added ".concat(d),"Removed ".concat(t),"Updated number of ".concat(d),"Information of ".concat(d," has already been removed from server")];switch(e){case"ADD":N({text:a[0],failure:!1});break;case"REMOVE":N({text:a[1],failure:!1});break;case"UPDATE":N({text:a[2],failure:!1});break;case"REMOVED_ALREADY":N({text:a[3],failure:!0});break;case"CREATE_ERROR":N({text:n,failure:!0})}setTimeout((function(){N({text:null,failure:!1})}),3e3)},T=function(){var e=n.filter((function(e){return e.name===d}))[0].id,t={name:d,number:C,id:e};v(e,t).then((function(a){r(n.map((function(n){return n.id!==e?n:t}))),E(""),R(""),S("UPDATE")})).catch((function(e){S("REMOVED_ALREADY")}))};return c.a.createElement("div",null,c.a.createElement("h2",null,"Phonebook"),c.a.createElement(g,{message:y}),c.a.createElement(i,{value:A,onChange:function(e){D(e.target.value)}}),c.a.createElement("h2",null,"Add new"),c.a.createElement(m,{name:d,changeName:function(e){E(e.target.value)},number:C,changeNumber:function(e){R(e.target.value)},addContact:function(){n.map((function(e){return e.name})).includes(d)?!0===window.confirm("".concat(d," is already added to phonebook, replace the old number with a new one"))&&T():h({name:d,number:C}).then((function(e){r(n.concat(e.data)),E(""),R(""),S("ADD")})).catch((function(e){S("CREATE_ERROR","",e.response.data.error),console.log("fail")}))},filter:A,persons:n,updateContact:T}),c.a.createElement("h2",null,"Numbers"),c.a.createElement(f,{persons:n,newFilter:A,removeContact:function(e,t){p(e).then((function(a){r(Object(o.a)(n.filter((function(t){return t.id!==e})))),S("REMOVE",t)})).catch((function(e){console.log("fail")}))}}))};u.a.render(c.a.createElement(w,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.ad4518f7.chunk.js.map